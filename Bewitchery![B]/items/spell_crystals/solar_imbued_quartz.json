{
	"format_version": "1.18.0",
	"minecraft:item": {
		"description": {
			"identifier": "bw:solar_imbued_quartz",
			"category": "items"
		},
		"components": {
			"minecraft:creative_category": {
				"parent": "itemGroup.name.essences"
			},
			"minecraft:max_stack_size": 64,
			"minecraft:hand_equipped": false,
			"minecraft:icon": {
				"texture": "solar_essence"
			},
			"minecraft:cooldown": {
			  "category": "bw:essence_crystal",
			  "duration": 0.5
			},
			"minecraft:on_use": {
			  "on_use": {
			    "event": "imbue_player"
			  }
			}
		},
		"events": {
		  "imbue_player": {
		    "sequence": [
		      {
		        "condition": "q.scoreboard('bw:p_Blocked') == 0",
		        "sequence": [
		          {
		            "condition": "q.scoreboard('bw:spellSlot1') == 0",
        		    "run_command": {
        		      "command": [
        		        "particle bw:solar_spell_phase_one ~~~",
        		        "playsound fire.ignite @a[r=6] ~~~ 0.8",
        		        "scoreboard players set @s bw:spellSlot1 2",
        		        "scoreboard players set @s bw:spellTime 0"
        		      ]
        		    },
        		    "decrement_stack": {}
		          },
		          {
		            "condition": "q.scoreboard('bw:spellSlot1') > 0 && q.scoreboard('bw:spellSlot2') == 0",
        		    "run_command": {
        		      "command": [
        		        "particle bw:solar_spell_phase_two ~~~",
        		        "playsound fire.ignite @a[r=6] ~~~ 0.8",
        		        "scoreboard players set @s bw:spellSlot2 2",
        		        "scoreboard players set @s bw:spellTime 0"
        		      ]
        		    },
        		    "decrement_stack": {}
		          }
		        ]
		      },
		      {
		        "condition": "q.scoreboard('bw:p_Blocked') == 0 && q.scoreboard('bw:spellSlot1') > 0 && q.scoreboard('bw:spellSlot2') > 0",
		        "sequence": [
		          {
		            "condition": "!(q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 2) && !(q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 4) && !(q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 3) && !(q.scoreboard('bw:spellSlot1') == 1 && q.scoreboard('bw:spellSlot2') == 1) && !(q.scoreboard('bw:spellSlot1') == 5 && q.scoreboard('bw:spellSlot2') == 6)",
		            "run_command": {
		              "command": [
		                "tellraw @s {\"rawtext\":[{\"text\":\"§cNo such spell exists.§r\"}]}",
		                "scoreboard players set @s bw:spellSlot1 0",
		                "scoreboard players set @s bw:spellSlot2 0",
		                "scoreboard players set @s bw:spellTime 0"
		              ]
		            }
		          },
		          
		          {
		            "sequence": [
		              {
		                "condition": "q.scoreboard('bw:combust_CD') == 0 && (q.scoreboard('bw:solarAff') >= 50 && q.scoreboard('bw:solarAff') <= 74) && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 2 && ((q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1)",
    		            "sequence": [
        		          {
        			          "shoot": {
        			            "projectile": "bw:combusting_projectile",
        			            "launch_power": 2.6
        			          },
        		            "run_command": {
        		              "command": [
        		                "scoreboard players set @s bw:combust_CD 200",
        		                "particle bw:solar_spellcast ~~~",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:combust_CD') > 0 && (q.scoreboard('bw:solarAff') >= 50 && q.scoreboard('bw:solarAff') <= 74) && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 2 && ((q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1)",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"This spell is on cooldown.\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              
		              {
		                "condition": "q.scoreboard('bw:combust_CD') == 0 && q.scoreboard('bw:solarAff') >= 75 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 2 && ((q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1)",
    		            "sequence": [
        		          {
        			          "shoot": {
        			            "projectile": "bw:combusting_projectile_upgrade",
        			            "launch_power": 2.6
        			          },
        		            "run_command": {
        		              "command": [
        		                "scoreboard players set @s bw:combust_CD 200",
        		                "particle bw:solar_spellcast ~~~",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:combust_CD') > 0 && q.scoreboard('bw:solarAff') >= 75 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 2 && ((q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1)",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"This spell is on cooldown.\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:combust_CD') == 0 && q.scoreboard('bw:solarAff') < 50 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 2",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"Your affinity with §cSolar Magick§r isn't high enough to cast this spell. [50.0%]\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              
		              {
		                "condition": "q.scoreboard('bw:sF_CD') == 0 && q.scoreboard('bw:solarAff') >= 20 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 4 && ((q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1)",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "damage @e[rm=1, r=5] 5 fire",
		                        "effect @e[rm=1, r=5] blindness 15 0 true",
		                        "particle bw:solar_flare ~~~",
		                        "particle bw:solar_spellcast ~~~",
		                "scoreboard players set @s bw:sF_CD 100",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:sF_CD') > 0 && q.scoreboard('bw:solarAff') >= 20 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 4 && ((q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1)",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"This spell is on cooldown.\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:sF_CD') == 0 && q.scoreboard('bw:solarAff') < 20 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 4",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"Your affinity with §cSolar Magick§r isn't high enough to cast this spell. [20.0%]\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              
		              {
		                "condition": "q.scoreboard('bw:sR_CD') == 0 && q.scoreboard('bw:solarAff') >= 25 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 3 && ((q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1)",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "function fire_ring",
		                        "scoreboard players set @s bw:sR_CD 100",
		                        "particle bw:solar_ring ~~~",
		                        "particle bw:solar_spellcast ~~~",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:sR_CD') > 0 && q.scoreboard('bw:solarAff') >= 25 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 3 && ((q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1)",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"This spell is on cooldown.\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:sR_CD') == 0 && q.scoreboard('bw:solarAff') < 25 && q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 3",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"Your affinity with §cSolar Magick§r isn't high enough to cast this spell. [25.0%]\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              
		              {
		                "condition": "((q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 2) && (q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 4) && (q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 3)) && q.scoreboard('bw:Solar') == 1 || (q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes')",
		                "randomize": [
		                  {
		                    "weight": 25,
		                    "run_command": {
		                      "command": [
		                        "scoreboard players add @s bw:solarAff 1"
		                      ]
		                    }
		                  },
		                  {
		                    "weight": 75
		                  }
		                ]
		              },
		              {
		                "condition": "((q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 2) && (q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 4) && (q.scoreboard('bw:spellSlot1') == 2 && q.scoreboard('bw:spellSlot2') == 3)) && !q.scoreboard('bw:Solar') == 1 && !(q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) && !query.biome_has_any_tag('nether', 'nether_wastes')",
		                "run_command": {
		                  "command": [
		                    "tellraw @s {\"rawtext\":[{\"text\":\"§cThere is not enough Solar Essence to cast this spell!§r\"}]}",
		                    "scoreboard players set @s bw:spellSlot1 0",
        		            "scoreboard players set @s bw:spellSlot2 0",
        		            "scoreboard players set @s bw:spellTime 0"
		                  ]
		                }
		              }
		            ]
		          },
		          
		          {
		            "sequence": [
		              {
		                "condition": "q.scoreboard('bw:fH_CD') == 0 && q.scoreboard('bw:earthAff') >= 45 && q.scoreboard('bw:spellSlot1') == 1 && q.scoreboard('bw:spellSlot2') == 1 && (q.scoreboard('bw:Earth') == 1 || q.biome_has_any_tag('overworld', 'overworld_generation'))",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "effect @s health_boost 60 1 true",
		                        "scoreboard players set @s bw:fH_CD 1300",
		                        "particle bw:earth_spellcast ~~~",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:fH_CD') > 0 && q.scoreboard('bw:earthAff') >= 45 && q.scoreboard('bw:spellSlot1') == 1 && q.scoreboard('bw:spellSlot2') == 1 && (q.scoreboard('bw:Earth') == 1 || q.biome_has_any_tag('overworld', 'overworld_generation'))",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"This spell is on cooldown.\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              {
		                "condition": "q.scoreboard('bw:fH_CD') == 0 && q.scoreboard('bw:earthAff') < 45 && q.scoreboard('bw:spellSlot1') == 1 && q.scoreboard('bw:spellSlot2') == 1",
    		            "sequence": [
        		          {
        		            "run_command": {
        		              "command": [
        		                "tellraw @s {\"rawtext\":[{\"text\":\"Your affinity with §2Earth Magick§r isn't high enough to cast this spell. [45.0%]\"}]}",
        		                "scoreboard players set @s bw:spellSlot1 0",
        		                "scoreboard players set @s bw:spellSlot2 0",
        		                "scoreboard players set @s bw:spellTime 0"
        		              ]
        		            },
        		            "decrement_stack": {}
        		          }
    		            ]
		              },
		              
		              {
		                "condition": "((q.scoreboard('bw:spellSlot1') == 1 && q.scoreboard('bw:spellSlot2') == 1)) && q.scoreboard('bw:Earth') == 1 || q.biome_has_any_tag('overworld', 'overworld_generation')",
		                "randomize": [
		                  {
		                    "weight": 25,
		                    "run_command": {
		                      "command": [
		                        "scoreboard players add @s bw:earthAff 1"
		                      ]
		                    }
		                  },
		                  {
		                    "weight": 75
		                  }
		                ]
		              },
		              {
		                "condition": "((q.scoreboard('bw:spellSlot1') == 1 && q.scoreboard('bw:spellSlot2') == 1)) && !q.scoreboard('bw:Earth') == 1 && !q.biome_has_any_tag('overworld', 'overworld_generation')",
		                "run_command": {
		                  "command": [
		                    "tellraw @s {\"rawtext\":[{\"text\":\"§aThere is not enough Earth Essence to cast this spell!§r\"}]}",
		                    "scoreboard players set @s bw:spellSlot1 0",
        		            "scoreboard players set @s bw:spellSlot2 0",
        		            "scoreboard players set @s bw:spellTime 0"
		                  ]
		                }
		              }
		            ]
		          }
		        ]
		      },
		      {
		        "condition": "q.scoreboard('bw:p_Blocked') == 0 && q.scoreboard('bw:spellSlot1') == 5 && q.scoreboard('bw:spellSlot2') == 6",
		        "sequence": [
		          {
		            "condition": "q.is_sneaking && q.scoreboard('bw:Solar') == 0",
		            "run_command": {
  		            "command": [
  		              "playsound beacon.power @a[r=6] ~~~ 0.5",
  		              "function warp/set_tp/warp2/initiate",
  		              "scoreboard players set @s bw:spellSlot1 0",
		                "scoreboard players set @s bw:spellSlot2 0",
		                "scoreboard players set @s bw:spellTime 0"
  		            ]
		            }
		          },
		          {
		            "condition": "q.is_sneaking && q.scoreboard('bw:Solar') == 0",
		            "run_command": {
		              "command": [
  		              "playsound beacon.deactivate @a[r=6] ~~~ 0.8",
  		              "tellraw @s {\"rawtext\":[{\"text\":\"§cYou are not attuned to the Sun. You cannot bind to this Warp.\"}]}",
  		              "scoreboard players set @s bw:spellSlot1 0",
		                "scoreboard players set @s bw:spellSlot2 0",
		                "scoreboard players set @s bw:spellTime 0"
  		            ]
		            }
		          },
		          
		          {
		            "condition": "!q.is_sneaking && (q.scoreboard('bw:warp2X') == 0 && q.scoreboard('bw:warp2Y') == 0 && q.scoreboard('bw:warp2Z') == 0) && (q.player_level >= 1 || q.player_level < 1)",
		            "run_command": {
		              "command": [
  		              "tellraw @s {\"rawtext\":[{\"text\":\"§cThere is no location bound to the §cSun§c.\"}]}",
		                "scoreboard players set @s bw:spellSlot1 0",
		                "scoreboard players set @s bw:spellSlot2 0",
		                "scoreboard players set @s bw:spellTime 0"
  		            ]
		            }
		          },
		          {
		            "condition": "!q.is_sneaking && (q.scoreboard('bw:warp2X') != 0 && q.scoreboard('bw:warp2Y') != 0 && q.scoreboard('bw:warp2Z') != 0) && q.player_level >= 1",
		            "run_command": {
		              "command": [
  		              "playsound portal.travel @a[r=6] ~~~ 0.8",
  		              "function warp/go_tp/warpTo_2",
  		              "xp -1l @s",
  		              "scoreboard players set @s bw:spellSlot1 0",
		                "scoreboard players set @s bw:spellSlot2 0",
		                "scoreboard players set @s bw:spellTime 0"
  		            ]
		            }
		          },
		          {
		            "condition": "!q.is_sneaking && (q.scoreboard('bw:warp2X') != 0 && q.scoreboard('bw:warp2Y') != 0 && q.scoreboard('bw:warp2Z') != 0) && q.player_level < 1",
		            "run_command": {
		              "command": [
  		              "playsound beacon.deactivate @a[r=6] ~~~ 0.8",
  		              "tellraw @s {\"rawtext\":[{\"text\":\"§aInsufficient XP Levels!\"}]}",
  		              "scoreboard players set @s bw:spellSlot1 0",
		                "scoreboard players set @s bw:spellSlot2 0",
		                "scoreboard players set @s bw:spellTime 0"
  		            ]
		            }
		          }
		        ]
		      },
		      {
		        "condition": "q.scoreboard('bw:p_Blocked') >= 1",
		        "run_command": {
		          "command": [
		            "tellraw @s {\"rawtext\":[{\"text\":\"A strange force blocks your connection to the Primal Elements. You are unable to cast spells using crystals.\"}]}"
		          ]
		        }
		      }
		    ]
		  }
		}
	}
}