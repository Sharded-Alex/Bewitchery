{
	"format_version": "1.17.0",
	"minecraft:item": {
		"description": {
			"identifier": "bw:fireball_scroll"
		},
		"components": {
			"minecraft:max_stack_size": 16,
			"minecraft:creative_category": {
				"parent": "itemGroup.name.bewitched_scrolls"
			},
			"minecraft:hand_equipped": false,
			"minecraft:foil": false,
			"minecraft:can_destroy_in_creative": false,
			"minecraft:projectile": {
			  "minimum_critical_power": 2.6,
			  "projectile_entity": "bw:combusting_projectile"
			},
			"minecraft:on_use": {
				"on_use": {
					"event": "release_spell"
				}
			},
      "minecraft:cooldown":{
        "category":"bw:fireball",
        "duration": 10.0
      },
			"minecraft:icon": {
				"texture": "solar_scroll"
			}
		},
		"events": {
			"release_spell": {
			  "sequence": [
			    {
			      "condition": "q.scoreboard('bw:combust_CD') == 0 && q.scoreboard('bw:solarAff') >= 50 && (q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1",
	          "shoot": {
        			"projectile": "bw:combusting_projectile",
        			"launch_power": 2.6
        		},
			      "run_command": {
			        "command": [
			          "playsound fire.ignite @a[r=6] ~~~ 0.8",
			          "scoreboard players set @s bw:combust_CD 200",
			          "particle bw:solar_spellcast ~~~"
			        ]
			      },
			      "decrement_stack": {}
			    },
			    {
			      "condition": "q.scoreboard('bw:combust_CD') > 0 && q.scoreboard('bw:solarAff') >= 50 && (q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) || query.biome_has_any_tag('nether', 'nether_wastes') || q.scoreboard('bw:Solar') == 1",
			      "run_command": {
			        "command": [
			          "tellraw @s {\"rawtext\":[{\"text\":\"This spell is on cooldown.\"}]}"
			        ]
			      }
			    },
			    {
			      "condition": "q.scoreboard('bw:combust_CD') >= 0 && q.scoreboard('bw:solarAff') < 50",
			      "run_command": {
			        "command": [
			          "tellraw @s {\"rawtext\":[{\"text\":\"Your affinity with §cSolar Magick§r isn't high enough to cast the spell inscribed on this scroll. [50.0%]\"}]}"
			        ]
			      }
			    },
			    {
			      "condition":"!(q.time_of_day >= 0.25 && q.time_of_day <= 0.75 && q.biome_has_any_tag('overworld', 'overworld_generation')) && !query.biome_has_any_tag('nether', 'nether_wastes') && !q.scoreboard('bw:Solar') == 1",
			      "run_command": {
			        "command": [
			          "tellraw @s {\"rawtext\":[{\"text\":\"§cThere is not enough Solar Essence to cast the spell inscribed on this scroll.§r\"}]}"
			        ]
			      }
			    }
			  ]
			}
		}
	}
}