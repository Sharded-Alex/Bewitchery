{
	"format_version": "1.17.0",
	"minecraft:item": {
		"description": {
			"identifier": "bw:hasten_scroll"
		},
		"components": {
			"minecraft:max_stack_size": 16,
			"minecraft:creative_category": {
				"parent": "itemGroup.name.bewitched_scrolls"
			},
			"minecraft:hand_equipped": false,
			"minecraft:foil": false,
			"minecraft:can_destroy_in_creative": false,
			"minecraft:on_use": {
				"on_use": {
					"event": "release_spell"
				}
			},
      "minecraft:cooldown":{
        "category":"bw:hasten",
        "duration": 35
      },
			"minecraft:icon": {
				"texture": "sky_scroll"
			}
		},
		"events": {
			"release_spell": {
			  "sequence": [
			    {
			      "condition": "q.scoreboard('bw:hasten_CD') == 0 && q.scoreboard('bw:skyAff') >= 1 && query.is_in_water_or_rain || q.scoreboard('bw:Sky') == 1",
			      "run_command": {
			        "command": [
			          "effect @s haste 30 1",
        		    "effect @s speed 30 1",
			          "playsound mob.dolphin.blowhole @a[r=6] ~~~ 0.8",
			          "scoreboard players set @s bw:hasten_CD 700",
			          "particle bw:wind_burst ~~~",
			          "particle bw:sky_spellcast ~~~"
			        ]
			      },
			      "decrement_stack": {}
			    },
			    {
			      "condition": "q.scoreboard('bw:hasten_CD') > 0 && q.scoreboard('bw:skyAff') >= 1 && query.is_in_water_or_rain || q.scoreboard('bw:Sky') == 1",
			      "run_command": {
			        "command": [
			          "tellraw @s {\"rawtext\":[{\"text\":\"This spell is on cooldown.\"}]}"
			        ]
			      }
			    },
			    {
			      "condition": "q.scoreboard('bw:hasten_CD') >= 0 && q.scoreboard('bw:skyAff') < 1",
			      "run_command": {
			        "command": [
			          "tellraw @s {\"rawtext\":[{\"text\":\"Your affinity with §7Sky Magick§r isn't high enough to cast the spell inscribed on this scroll. [1.0%]\"}]}"
			        ]
			      }
			    },
			    {
			      "condition":"!query.is_in_water_or_rain && !q.scoreboard('bw:Sky') == 1",
			      "run_command": {
			        "command": [
			          "tellraw @s {\"rawtext\":[{\"text\":\"§7There is not enough Sky Essence to cast the spell inscribed on this scroll.§r\"}]}"
			        ]
			      }
			    }
			  ]
			}
		}
	}
}