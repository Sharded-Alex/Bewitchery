{
	"minecraft:entity": {
		"format_version": "1.16.0",
		"description": {
			"identifier": "bw:flying_broom",
			"is_summonable": true,
			"is_spawnable": false,
			"is_experimental": false,
      "scripts": {
        "animate": [
          "dismount"
        ]
      },
      "animations": {
        "dismount": "controller.animation.get_off"
      }
		},
		
		"component_groups": {
		  "bw:despawn": {
		    "minecraft:instant_despawn": {}
		  },
		  "bw:speed_up": {
		    "minecraft:movement": {
				  "value": 0.8
		    }
		  }
		},
		
		"components": {
			"minecraft:behavior.rise_to_liquid_level": {
				"priority": 0,
				"liquid_y_offset": 0.5,
				"rise_delta": 0.05,
				"sink_delta": 0.05
			},
			"minecraft:underwater_movement": {
				"value": 0.25
			},
      "minecraft:lava_movement": {
        "value": 0.25
      },
			"minecraft:rideable": {
				"seat_count": 2,
				"family_types": ["player", "cat", "ocelot", "frog", "fox", "chicken"],
				"interact_text": "action.interact.ride_broom",
				"pull_in_entities": true,
				"controlling_seat": 1,
				"seats": [
  				{
  					"position": [0.0, 0.45, 0.0],
  					"min_rider_count": 0,
  					"max_rider_count": 1
  				},
  				{
  					"position": [0, 0.45, 0.15],
  					"min_rider_count": 2,
  					"max_rider_count": 2
  				},
  				{
  					"position": [0, 0.75, -0.8],
  					"min_rider_count": 2,
  					"max_rider_count": 2
  				}
				]
			},
			"minecraft:input_ground_controlled": {},
      "minecraft:damage_sensor": {
        "triggers": {
          "cause": "fall",
          "deals_damage": false
        }
      },
      "minecraft:behavior.float": {
        "priority": 1
      },
		  "minecraft:skin_id": {
		    "value": 0
		  },
      "minecraft:navigation.walk": {
        "can_path_over_water": true,
        "avoid_water": true,
        "avoid_damage_blocks": true
      },
      "minecraft:movement.basic": {
      },
      "minecraft:jump.static": {
      },
      "minecraft:can_climb": {
      },
			"minecraft:health": {
				"value": 10,
				"max": 10
			},
			"minecraft:environment_sensor": {
			  "triggers": [
    		  {
		        "filters": {
  			      "test": "rider_count",
  			      "operator": "==",
  			      "value": 0
    		    },
    		    "event": "despawn"
    		  },
    		  {
		        "filters": {
  			      "test": "rider_count",
  			      "operator": "==",
  			      "value": 1
    		    },
    		    "event": "test_for_score"
    		  },
    		  {
		        "filters": {
  			      "test": "on_ground",
  			      "operator": "==",
  			      "value": true
    		    },
    		    "event": "slow_tf_down"
    		  },
    		  {
		        "filters": {
  			      "test": "on_ground",
  			      "operator": "!=",
  			      "value": true
    		    },
    		    "event": "speed_tf_up"
    		  }
			  ]
			},
			"minecraft:movement": {
				"value": 0.15
			},
			"minecraft:collision_box": {
				"width": 1,
				"height": 1
			},
			"minecraft:physics": {}
		},
		"events": {
		  "despawn": {
		    "add": {
		      "component_groups": [
		        "bw:despawn"
		      ]
		    }
		  },
		  "speed_tf_up": {
		    "add": {
		      "component_groups": [
		        "bw:speed_up"
		      ]
		    }
		  },
		  "slow_tf_down": {
		    "remove": {
		      "component_groups": [
		        "bw:speed_up"
		      ]
		    }
		  },
		  "test_for_score": {
		    "sequence": [
		      {
		        "filters": {
		          "all_of": [
		            {
		              "test": "has_tag",
		              "subject": "other",
		              "operator": "!=",
		              "value": "bw:broom_flyer"
		            }
		          ]
		        },
		        "run_command": {
		          "command": [
		            "ride @s stop_riding"
		          ],
		          "target": "other"
		        }
		      }
		    ]
		  }
		}
	}
}
